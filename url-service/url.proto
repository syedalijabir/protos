syntax = "proto3";

package url;

option go_package = "./url-service";

service URLService {
  rpc ShortenURL(ShortenRequest) returns (ShortenResponse);
  rpc GetOriginalURL(GetOriginalRequest) returns (GetOriginalResponse);
  rpc GetURLStats(StatsRequest) returns (StatsResponse);
}

message ShortenRequest {
  string original_url = 1;
  string custom_alias = 2;
}

message ShortenResponse {
  string short_code = 1;
  string original_url = 2;
  string error = 3;
}

message GetOriginalRequest {
  string short_code = 1;
}

message GetOriginalResponse {
  string original_url = 1;
  bool found = 2;
  string error = 3;
}

message StatsRequest {
  string short_code = 1;
}

message StatsResponse {
  string short_code = 1;
  int64 click_count = 2;
  string created_at = 3;
  string error = 4;
}
